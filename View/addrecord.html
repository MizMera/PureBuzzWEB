<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Record</title>
    <link rel="stylesheet" href="../View/style.css">
</head>
<body class="harvest bg-light p-5">
    <header>
        <img src="../assets/logo.ico" alt="Logo">
        <h1>Add New Record</h1>
    </header>
    <main class="container p-4 rounded shadow-sm">
        <form id="addRecordForm" class="form-container">
            <div class="form-group mb-3">
                <label for="recordDate" class="form-label">Date:</label>
                <input type="date" id="recordDate" name="recordDate" class="form-control" required>
            </div>
            <div class="form-group mb-3">
                <label for="apiaryLocation" class="form-label">Apiary Location:</label>
                <input type="text" id="apiaryLocation" name="apiaryLocation" class="form-control" placeholder="Enter location" required>
            </div>
            <div class="form-group mb-3">
                <label for="quantityHarvested" class="form-label">Quantity Harvested (kg):</label>
                <input type="number" id="quantityHarvested" name="quantityHarvested" class="form-control" placeholder="Enter quantity" required>
            </div>
            <div class="form-group mb-3">
                <label for="qualityRated" class="form-label">Quality Rated:</label>
                <select id="qualityRated" name="qualityRated" class="form-control" required>
                    <option value="" disabled selected>Select quality</option>
                    <option value="Excellent">Excellent</option>
                    <option value="Good">Good</option>
                    <option value="Average">Average</option>
                    <option value="Poor">Poor</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary mt-3">Submit Record</button>
        </form>
        <button class="btn btn-secondary mt-4" onclick="location.href='harvest.html'">Back to Harvest Records</button>
    </main>
    <script>
        document.getElementById('addRecordForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const recordDate = document.getElementById('recordDate').value;
    const apiaryLocation = document.getElementById('apiaryLocation').value;
    const quantityHarvested = document.getElementById('quantityHarvested').value;
    const qualityRated = document.getElementById('qualityRated').value;

    const formData = new FormData();
    formData.append('date', recordDate);
    formData.append('location', apiaryLocation);
    formData.append('quantity', quantityHarvested);
    formData.append('quality', qualityRated);

    // Log formData content for debugging
    for (const [key, value] of formData.entries()) {
        console.log(`${key}: ${value}`);
    }

    fetch('harvest_records.php', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            alert("Record added successfully!");
            window.location.href = "harvest.html"; // Redirect to the harvest list
        } else {
            alert("Error: " + data.message);
        }
    })
    .catch(error => {
        alert("An error occurred: " + error.message);
    });
});

    </script>
</body>
</html>
